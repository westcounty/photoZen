# 更新日志

## [2.2.0] - 2026-01-29

### 🔧 架构优化

- **地理位置缓存**：首次读取 EXIF GPS 后自动缓存到数据库，后续直接命中，不再重复读取

---

### 💡 功能改进

- **从此开始**：卡片视图定位到选中照片；退出后恢复之前的照片范围设置
- **重命名序号**：改为起始值 + 步进值模式
- **重命名预览**：实时显示地理位置省市信息

---

### 🐛 问题修复

- 修复"从此开始"按钮无反应的问题
- 修复重命名时地理位置获取不到的问题
- 修复重命名预览中地理位置为空的问题

---

## [2.1.0] - 2026-01-28

### 🌟 时光拾遗小部件

**全新桌面小部件** —— 让尘封的记忆，自然涌现

#### 📷 三种尺寸
- **时光拾遗 (小)** - 2×2 网格，极简展示
- **时光拾遗 (标准)** - 4×2 网格，照片 + 操作按钮（推荐）
- **时光拾遗 (大)** - 4×4 网格，大图 + 诗意时间 + 完整操作

#### ✨ 核心功能
- **"尘封记忆"算法**：智能选取久远照片，时间越久权重越高
- **"那年今日"优先**：历史上同月同日的照片优先展示
- **诗意时间格式**：「三年前的夏天」「很久以前的冬天」
- **快捷分类**：直接在小部件上保留/删除/待定
- **自动刷新**：30分钟至每天可配置
- **点击设置**：点击时间文字区域可修改配置
- **位置信息**：显示照片拍摄地点（省·市）

#### 🖼️ 预览界面
- 点击照片进入全屏预览
- 支持复制、编辑、删除操作
- 编辑直达内置编辑器

---

### 💡 功能改进

- **批量添加到相册**：FlowSorter 列表视图支持批量添加到相册
- **5列模式**：列表视图支持 5 列显示
- **灯箱对比**：底栏新增保留/回收站按钮
- **待定照片列表**：新增长按操作菜单

---

### 🐛 问题修复

- 修复随机排序完全失效的问题
- 修复成就系统连续天数不同步的问题
- 修复从 1.6 升级到 2.0 后连续整理天数丢失的问题
- 修复照片列表长按选中后无法点击取消的问题
- 修复时间线年月定位 FAB 被底部导航栏遮挡
- 修复全屏预览删除确认弹窗问题

---

## [2.0.0] - 2026-01-26

### 🚀 PhotoZen 2.0 - 自 1.6 以来的全面升级

这是自 v1.6 公开发布以来最重大的更新！历经多个开发阶段，从核心体验到界面设计进行了全方位升级。

---

### 🌟 全新导航体验

#### 📱 底部导航系统
- **4 Tab 快捷导航**：首页 / 时间线 / 相册 / 设置，一键直达
- **智能状态保持**：切换 Tab 时页面状态自动保留
- **沉浸式整理**：整理流程自动隐藏导航栏，专注体验

#### 👆 统一手势交互
- 所有照片列表手势完全一致：
  - **点击** = 查看大图
  - **长按** = 进入选择模式
- 覆盖：相册、时间线、回收站、保留列表等所有页面

---

### 🏠 首页重构

- **分层卡片设计**：主操作区 + 快捷入口 + 统计信息
- **统一整理入口**：合并"快速整理"和"一站式整理"为单一按钮
- **减少选择困难**：点击弹出模式选择，不再纠结

---

### 💡 新增功能

#### 交互引导系统
- 首次使用显示操作引导，降低学习成本
- 滑动整理、长按多选、视图切换等多处引导
- 可在设置中重置引导

#### 📊 整理统计页面
- **日历热力图**：类似 GitHub 贡献图，展示近 12 周整理活动
- **统计卡片**：总整理数、本周/本月、连续天数

#### 🔍 筛选条件管理
- 顶部 Chip 显示当前筛选条件
- 底部抽屉筛选面板，支持相册和日期筛选
- 最多保存 3 个筛选预设

#### ⚡ 批量操作优化
- **选择顶栏**：显示已选数量，提供全选/取消按钮
- **撤销支持**：批量操作后支持一键撤销
- **快捷退出**：返回键或关闭按钮退出选择模式

---

### 🎨 视觉优化

- **空状态统一**：所有空状态使用一致的视觉风格
- **设置页分组**：设置项按功能分组，可展开/折叠
- **全局消息提示**：统一管理，支持成功/错误/警告样式
- **删除确认优化**：批量删除前显示缩略图预览

---

### 🐛 问题修复

- 修复自定义筛选全选相册后崩溃的问题
- 修复快速滑动时的崩溃问题
- 修复进度显示分母为 500 的问题

---

### ⚡ 性能提升

- **智能缩略图**：按场景自动选择最优尺寸
- **照片预加载**：提前加载即将显示的照片
- **动画优化**：使用 GPU 加速，告别卡顿
