# Changelog

所有版本更新记录。

## [1.5.7] - 2026-01-16

### 新功能
- **Flow列表视图列数切换**：Flow模式列表视图支持1/2/3列切换
- **回收站批量待定**：回收站批量管理新增"设置为待定"操作

### 修复
- **Flow筛选条件生效**：修复Flow模式下筛选条件（如排除相机照片）不生效的问题
- **Flow会话照片追踪**：待定筛选和快速打标环节只显示本次Flow中的照片，而非全部照片

---

## [1.5.6] - 2026-01-16

### 新功能
- **批量管理扩展**：待定照片和回收站也支持批量管理模式
- **待定对比入口**：待定照片列表新增对比模式快捷入口
- **标签照片批量操作**：支持批量修改标签、批量移除标签
- **新建标签选项**：修改标签时始终显示新建标签选项
- **列数切换功能**：所有瀑布流界面支持1/2/3列切换，自动记忆偏好

### 优化
- **回收站瀑布流**：回收站改为完整展示的双列瀑布流布局
- **批量操作差异化**：不同列表根据状态显示不同的批量操作按钮

---

## [1.5.5] - 2026-01-16

### 新功能
- **批量管理模式**：保留照片列表新增批量选择功能，点击右上角勾选图标进入
- **批量设置标签**：可选择已有标签或创建新标签应用到选中照片
- **批量操作**：支持批量待定、批量删除、批量重置等操作
- **全选/取消全选**：快速选择或取消选择所有照片

### 优化
- **标签气泡拖动体验**：彻底重写拖动逻辑，实现丝滑跟手的拖动体验
- **惯性滑动**：释放气泡后根据速度继续滑动
- **弹性碰撞**：气泡之间碰撞时产生弹性推挤效果
- **首页品牌升级**：标题更名为 PhotoZen 图禅
- **删除入口更名**：原"删除"更名为"回收站"

---

## [1.5.4] - 2026-01-16

### 优化
- **首页布局调整**：对调待定和回收站的位置，优化视觉流程
- **整理任务简化**：移除待对比照片数量显示，界面更简洁

### 修复
- **移动模式优化**：优先请求写权限实现真正的文件移动，避免复制后删除
- **标签关系修复**：修复移动模式下标签关系可能错误的问题

---

## [1.5.3] - 2026-01-15

### 新功能
- **标签气泡拖拽**：支持丝滑拖动气泡，带碰撞推挤和边界检测
- **气泡位置记忆**：自动保存气泡位置，下次进入时恢复布局
- **恢复默认布局**：新增重置按钮，一键恢复初始圆形布局
- **成就庆祝特效**：解锁成就时显示精美的 Toast 和撒花动画

### 优化
- **禁止重名标签**：创建标签时检测重名，避免混淆
- **批量写权限请求**：移动照片时优先批量请求写权限，提升成功率

### 修复
- **标签关系修复**：修复直接移动成功时标签意外丢失的问题

---

## [1.5.2] - 2026-01-15

### 新功能
- **成就统计模块**：成就页面新增累计统计卡片，显示已整理、已保留、已删除照片数量

### 优化
- **快速分类数量**：修复快速分类横幅显示的照片数量，现在正确显示未添加标签的照片数量
- **排序图标优化**：时间正序显示↑，时间倒序显示↓，随机显示🔀

### 修复
- **保留列表排序**：修复排序切换时首张照片位置固定的问题
- **成就触发修复**：修复清洁工和清理大师成就无法触发的问题
- **设置界面更新**：更新版本号和更新日志

---

## [1.5.1] - 2026-01-15

### 优化
- **快速分类横幅**：现在显示未添加标签的照片数量
- **排序图标区分**：时间正序向上箭头，时间倒序向下箭头
- **排序基准**：统一使用创建时间（dateAdded）
- **移动模式**：优先尝试直接移动文件

### 修复
- **复制照片时间戳**：修复副本与原图时间不一致的问题

---

## [1.5.0] - 2026-01-15

### 新功能
- **照片排序**：筛选模式（Flow Sorter 和快速整理）新增排序功能，支持时间正序、时间倒序、随机排序三种方式，点击按钮即可切换
- **照片复制**：保留照片列表新增"复制照片"功能，可创建照片副本并完整保留所有 EXIF 信息和时间戳

### 优化
- **标签相册关联**：移动模式优化，优先使用系统移动 API 直接移动文件，避免复制后删除的低效操作
- **EXIF 保留**：复制照片时完整保留所有 EXIF 元数据（拍摄时间、GPS 位置、相机信息等）

### 修复
- 修复列表视图多选删除时可能导致的崩溃问题
- 批量操作改为原子性数据库操作，提升稳定性和性能

---

## [1.4.0] - 2026-01-14

### 新功能
- 新应用图标
- 标签与系统相册关联功能
- 瀑布流布局和列表视图模式
- 批量选择和操作功能
- 分享照片功能
- 快速分类入口横幅
- 筛选后的统计信息显示

### 优化
- 现代化底部操作面板
- 外部应用打开照片支持
- 相机相册检测优化

### 修复
- 相册创建 MediaStore API 兼容性
- 分享功能 MIME 类型正确识别
- 照片筛选设置应用修复

---

## [1.3.0] - 2026-01-12

### 新功能
- Flow Sorter 滑动整理界面
- Light Table 照片对比功能
- 连击系统和成就系统
- 虚拟副本功能
- 非破坏性裁切

### 优化
- 图片加载性能优化
- 触觉反馈增强

---

## [1.2.0] - 2026-01-10

### 新功能
- 标签管理系统
- 快速标签功能
- 照片筛选（全部/仅相机/排除相机/自定义）

---

## [1.1.0] - 2026-01-08

### 新功能
- 基础照片整理功能
- MediaStore 同步
- 保留/删除/待定状态管理

---

## [1.0.0] - 2026-01-05

### 初始版本
- 基础框架搭建
- 权限管理
- 首页界面
