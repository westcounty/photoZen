# Changelog

所有版本更新记录。

版本号规则：`主版本.次版本.修复版本.构建号`
- 第一位：重大功能更新
- 第二位：一般功能更新
- 第三位：Bug 修复
- 第四位：构建号

---

## [2.1.0] - 2026-01-28

### 🌟 时光拾遗小部件

**全新桌面小部件** —— 让尘封的记忆，自然涌现

#### 📷 三种尺寸
- **时光拾遗 (小)** - 2×2 网格，极简展示
- **时光拾遗 (标准)** - 4×2 网格，照片 + 操作按钮（推荐）
- **时光拾遗 (大)** - 4×4 网格，大图 + 诗意时间 + 完整操作

#### ✨ 核心功能
- **"尘封记忆"算法**：智能选取久远照片，时间越久权重越高
- **"那年今日"优先**：历史上同月同日的照片优先展示
- **诗意时间格式**：「三年前的夏天」「很久以前的冬天」
- **快捷分类**：直接在小部件上保留/删除/待定
- **自动刷新**：30分钟至每天可配置
- **点击设置**：点击时间文字区域可修改配置
- **位置信息**：显示照片拍摄地点（省·市）

#### 🖼️ 预览界面
- 点击照片进入全屏预览
- 支持复制、编辑、删除操作
- 编辑直达内置编辑器

---

### 💡 功能改进

#### 列表视图增强
- **批量添加到相册**：FlowSorter 列表视图支持批量添加到相册
- **5列模式**：现已支持 5 列显示
- **分页加载修复**：列表浏览模式正确加载全部照片

#### 灯箱对比优化
- 底栏新增保留/回收站按钮，操作更便捷

#### 待定照片列表
- 新增长按操作菜单

---

### 🐛 问题修复

- 修复随机排序完全失效的问题（SQL 整数溢出）
- 修复成就系统连续天数不同步的问题
- 修复从 1.6 升级到 2.0 后连续整理天数丢失的问题
- 修复照片列表长按选中后无法点击取消的问题
- 修复分享对比界面和时间线详情页的多个问题
- 修复时间线年月定位 FAB 被底部导航栏遮挡
- 修复时间线详情页开始整理按钮筛选条件设置错误
- 修复全屏预览删除确认弹窗问题
- 修复编译警告 - 迁移 deprecated API

---

### 📱 每日进度小部件

- 小部件改名为「每日任务」，更直观

---

### 🎓 新手引导

- 首页新增时光拾遗小部件引导提示

---

## [2.0.0] - 2026-01-26

### 🚀 PhotoZen 2.0 - 自 1.6 以来的全面升级

这是自 v1.6 公开发布以来最重大的更新！历经多个开发阶段，从核心体验到界面设计进行了全方位升级。

---

### 🌟 全新导航体验

#### 📱 底部导航系统
- **4 Tab 快捷导航**：首页 / 时间线 / 相册 / 设置，一键直达
- **智能状态保持**：切换 Tab 时页面状态自动保留
- **沉浸式整理**：整理流程自动隐藏导航栏，专注体验

#### 👆 统一手势交互
- 所有照片列表手势完全一致：
  - **点击** = 查看大图
  - **长按** = 进入选择模式
- 覆盖：相册、时间线、回收站、保留列表等所有页面

---

### 🏠 首页重构

- **分层卡片设计**：主操作区 + 快捷入口 + 统计信息
- **统一整理入口**：合并"快速整理"和"一站式整理"为单一按钮
- **减少选择困难**：点击弹出模式选择，不再纠结

---

### 💡 新增功能

#### 交互引导系统
- 首次使用显示操作引导，降低学习成本
- 滑动整理、长按多选、视图切换等多处引导
- 可在设置中重置引导

#### 📊 整理统计页面
- **日历热力图**：类似 GitHub 贡献图，展示近 12 周整理活动
- **统计卡片**：总整理数、本周/本月、连续天数

#### 🔍 筛选条件管理
- 顶部 Chip 显示当前筛选条件
- 底部抽屉筛选面板，支持相册和日期筛选
- 最多保存 3 个筛选预设

#### ⚡ 批量操作优化
- **选择顶栏**：显示已选数量，提供全选/取消按钮
- **撤销支持**：批量操作后支持一键撤销
- **快捷退出**：返回键或关闭按钮退出选择模式

---

### 🎨 视觉优化

- **空状态统一**：所有空状态使用一致的视觉风格
- **设置页分组**：设置项按功能分组，可展开/折叠
- **全局消息提示**：统一管理，支持成功/错误/警告样式
- **删除确认优化**：批量删除前显示缩略图预览

---

### 🐛 问题修复

- 修复自定义筛选全选相册后崩溃的问题
- 修复快速滑动时的崩溃问题
- 修复进度显示分母为 500 的问题

---

### ⚡ 性能提升

- **智能缩略图**：按场景自动选择最优尺寸
- **照片预加载**：提前加载即将显示的照片
- **动画优化**：使用 GPU 加速，告别卡顿

---

### 📦 技术架构升级

- **状态管理重构**：AsyncState、PhotoSelectionStateHolder、子状态拆分
- **ThumbnailSizePolicy**：分级缩略图策略
- **PhotoPreloader**：智能预加载
- **设计 Token 系统**：PicZenTokens、PicZenMotion、PicZenActionColors

---

## [2.0.0.001] - 2026-01-25 (内部版本)

### 🎨 设计系统升级

**这是一次「内在美」的升级。** 虽然功能没变，但每一个动画、每一次触感、每一个颜色都经过了精心打磨。你可能说不出哪里变了，但就是觉得用起来更舒服了。

---

### ✨ 核心升级

#### 🎯 统一设计语言
- **设计 Token 系统**：间距、圆角、图标尺寸全部统一，告别「这里 8dp 那里 12dp」的混乱
- **操作色彩系统**：保留是绿色、删除是红色、待定是黄色——每个操作都有自己的「性格」
- **6 级表面层次**：深色主题下，卡片和背景有了更清晰的层次感

#### 🌊 全新动效体验
- **错落入场**：列表加载时每个卡片依次飘入，不再「噗」的一下全出来
- **弹性回弹**：滑动卡片松手后会「弹」一下再归位，手感更Q弹
- **倾斜透视**：水平滑动时卡片会微微倾斜，有 3D 感
- **动态阴影**：滑动幅度越大，阴影越深，让你感受到「力量」
- **缩放呼吸**：下滑时微缩、上滑时微放，卡片好像在「呼吸」

#### 📳 方向感知震动
- **开始拖动**：轻微一震，「我知道你要动手了」
- **到达临界点**：保留轻震、删除强震、待定双击——不看屏幕也知道滑到哪了
- **操作完成**：确认一震，「搞定！」

---

### 🔧 技术亮点

- **PicZenTokens**：统一的设计 Token 对象
- **PicZenMotion**：时长、缓动、弹簧动画配置中心
- **PicZenActionColors**：Keep/Trash/Maybe 语义色彩
- **PicZenDarkSurfaces**：6 级深色表面色阶
- **HapticFeedbackManager**：统一震动反馈管理

---

### 📝 设计优化清单

完成 33 项设计优化（DES-001 ~ DES-033），覆盖：
- 动画时长与缓动函数标准化
- 列表错落入场动画
- 页面过渡动画系统
- 按压微交互效果
- 滑动卡片倾斜透视
- 动态阴影效果
- 弹性回弹动画
- 震动反馈系统

---

## [2.0.0.006] - 2026-01-24

### 🎯 引导系统优化

#### 新增引导
- **视图切换引导** (`FLOW_SORTER_VIEW_TOGGLE`)：滑动整理完成后提示用户可切换卡片/列表视图
- **时间线分组引导** (`TIMELINE_GROUPING`)：首次进入时间线时提示分组模式切换
- **统计日历引导** (`STATS_CALENDAR`)：首次进入统计页时介绍日历热力图功能
- **筛选面板引导** (`FILTER_PANEL`)：首次打开筛选面板时引导相册选择

#### 引导清理
- 移除未使用的 `SELECTION_SELECT_ALL` 引导

### 🐛 Bug 修复

#### 修复自定义筛选崩溃问题
- **问题**：全选相册后取消几个，点击开始整理会因 SQL 参数过多而崩溃
- **原因**：SQLite 有 ~999 参数限制，大量相册 ID 使用 `IN` 查询会溢出
- **解决方案**：实现智能包含/排除模式
  - 选中数量 ≤ 未选中数量 → 使用包含模式 (`IN`)
  - 选中数量 > 未选中数量 → 使用排除模式 (`NOT IN`)
  - 始终使用参数最少的查询方式，确保不会超过限制

### 📦 技术改进

- `CustomFilterSession` 新增 `excludeAlbumIds` 字段支持排除模式
- `PhotoDao` 新增排除模式的计数和分页查询方法
- `GetUnsortedPhotosUseCase` 新增排除模式支持
- `FlowSorterViewModel` 适配排除模式的数据库分页
- 各 ViewModel 注入 `GuideRepository` 支持引导功能

---

## [2.0.0.001] - 2026-01-20

### 🎉 PhotoZen 2.0 - 全面体验升级

**PhotoZen 2.0** 是自发布以来最重大的版本更新！历经 4 个开发阶段，从核心体验到技术架构进行了全面升级，让照片整理变得更加高效、流畅、愉悦。

---

### 🌟 核心亮点

#### 📱 全新底部导航系统
- **4 Tab 快捷导航**：首页 / 时间线 / 相册 / 设置，一键直达常用功能
- **智能状态保持**：Tab 切换时页面状态自动保持，返回时无需重新加载
- **沉浸式整理**：整理流程自动隐藏导航栏，专注体验

#### 👆 统一手势交互
- 所有照片列表页面手势行为完全一致：
  - **点击** = 查看大图/进入详情
  - **长按** = 进入选择模式
  - **长按拖动** = 批量选择
- 覆盖：相册照片、时间线、回收站、保留列表

#### 🏠 首页信息架构重构
- **分层卡片设计**：主操作区 + 快捷入口 + 统计信息，层次分明
- **统一整理入口**：合并"快速整理"和"一站式整理"，点击弹出模式选择
- **减少选择困难**：不再纠结该选哪个模式

---

### 💡 功能增强

#### 交互引导系统（新增）
- 首次使用时显示操作引导，降低学习成本
- 滑动整理引导、长按多选引导
- 引导状态持久化，可在设置中重置

#### 批量操作效率优化
- **选择顶栏**：显示已选数量，提供全选/取消按钮
- **撤销支持**：批量操作后显示 Snackbar，支持一键撤销
- **快捷退出**：返回键或点击关闭按钮退出选择模式

#### 筛选条件管理
- 顶部 Chip 显示当前生效的筛选条件
- 底部抽屉筛选面板，支持相册和日期筛选
- 最多保存 3 个筛选预设

---

### 🎨 体验打磨

#### 整理统计页面（新增）
- **日历热力图**：类似 GitHub 贡献图，展示近 12 周整理活动
- **统计卡片**：总整理数、本周/本月整理数、连续整理天数

#### 滑动卡片动效增强
- 边缘发光效果：滑动时卡片边缘显示方向对应颜色的发光
- 方向指示器升级：到达阈值时图标从空心变实心，配合脉冲动画
- 震动反馈：滑动达到阈值时轻微震动提示

#### 视觉与交互优化
- **空状态统一**：所有空状态使用一致的视觉风格和引导文案
- **设置页分组**：设置项按功能分组，可展开/折叠
- **全局 Snackbar**：统一管理，支持成功/错误/警告样式
- **删除确认优化**：批量删除前显示缩略图预览，避免误操作

---

### ⚡ 技术架构升级（Phase 4）

#### 状态管理重构
- **AsyncState**：通用异步状态，替代多个 isLoading/error 字段组合
- **PhotoSelectionStateHolder**：共享选择状态，避免多 ViewModel 重复定义
- **子状态拆分**：HomeUiState、FlowSorterUiState 拆分为多个职责清晰的子状态

#### 性能优化
- **ThumbnailSizePolicy**：分级缩略图策略，按场景自动选择最优尺寸
- **PhotoPreloader**：智能预加载，提前加载即将显示的照片
- **动画优化**：使用 `graphicsLayer` 替代 `offset`，避免重新布局

#### 代码复用与组件化
- **BottomBarConfigs**：预定义各场景的底栏按钮组合
- **PhotoBatchOperationUseCase**：统一批量操作，自动处理撤销、Snackbar、统计

---

### 技术改进清单

**导航系统**
- `MainDestination` - 底部导航目的地定义
- `MainScaffold` - 带底部导航的 Scaffold
- `MainBottomNavigation` - 底部导航组件

**引导系统**
- `GuideRepository` - 引导状态管理
- `GuideTooltip` - 引导气泡组件
- `GuideKey` - 引导键定义

**筛选系统**
- `FilterConfig` - 筛选配置
- `FilterPreset` - 筛选预设
- `FilterBottomSheet` - 筛选面板
- `FilterChipRow` - 筛选条件展示

**状态管理**
- `AsyncState` - 通用异步状态
- `PhotoSelectionStateHolder` - 共享选择状态
- `HomeSubStates` - 首页子状态
- `FlowSorterSubStates` - 滑动整理子状态
- `SnackbarManager` - 全局 Snackbar
- `UndoManager` - 撤销管理

**性能组件**
- `ThumbnailSizePolicy` - 缩略图尺寸策略
- `PhotoPreloader` - 照片预加载器
- `AnimationOptimizations` - 动画优化工具

**视觉组件**
- `EdgeGlow` - 边缘发光效果
- `DirectionIndicator` - 方向指示器
- `EmptyState` - 空状态组件
- `ConfirmDeleteSheet` - 删除确认弹窗
- `SelectionTopBar` - 选择模式顶栏
- `CalendarHeatmap` - 日历热力图
- `StatsCards` - 统计卡片
- `CollapsibleSettingsGroup` - 可折叠设置分组

**数据层**
- `SortingRecordEntity` - 整理记录实体
- `StatsRepository` - 统计数据仓库
- `PhotoBatchOperationUseCase` - 批量操作 UseCase
- `StateModule` - 状态组件 DI 模块

---

## [1.6.0.001] - 2026-01-18

### 🎯 功能重构与一站式整理升级

本版本进行大规模功能重构，删除标签模块，完善相册分类体验，新增系统分享能力，并将一站式整理流程升级为更完整的多阶段工作流。

### 功能精简

- **删除标签模块**：移除标签气泡、快速标签等功能，让应用更专注于照片整理核心流程
- **简化通知设置**：删除每日提醒设置，仅保留状态栏进度通知，进度通知新增激励文案
- **简化首页布局**：删除一站式整理开关和首页组件，界面更清爽

### 相册分类增强

- **添加到相册弹窗**：新增通用"添加到相册"弹窗组件，支持勾选多个相册
- **多处添加相册入口**：筛选照片列表多选、保留照片列表、长按操作均可添加到相册
- **底部栏布局优化**：选择模式底部栏改为上下布局（图标在上、文字在下），操作更清晰

### 多选体验优化

- **拖动批量选择**：长按照片后拖动可批量选择多张照片，体验与 Google Photos 一致
- **应用范围**：保留照片列表、回收站列表、待定照片列表、筛选照片列表

### 系统分享功能

- **接收分享**：支持从其他 app 分享照片到 PhotoZen
- **复制照片**：分享的照片可复制到相册，保留 EXIF 信息
- **对比照片**：分享 2-6 张照片可直接进入对比模式

### 时间线增强

- **全屏预览**：点击时间线照片进入全屏预览，支持双指缩放、循环切换
- **底部操作栏**：全屏预览时底部显示添加到相册、删除、标记状态等操作
- **照片状态角标**：照片左上角显示状态角标（保留/待定/回收站）

### 保留照片列表优化

- **快速整理入口**：显示不在相册中的照片数量，一键进入分类模式
- **显示开关**：可切换是否显示已在相册中的照片

### 相册照片列表优化

- **刷新修复**：修复删除/移动照片后列表不实时更新的问题
- **全局状态筛选**：顶部 FilterChip 可按保留/待定/回收站/未筛选状态筛选
- **从此张开始筛选**：长按照片可从当前位置开始筛选流程

### 一站式整理流程升级

- **动态阶段**：根据是否开启"直接分类到相册"，自动切换 3 阶段或 4 阶段模式
  - 3 阶段：筛选 → 对比待定 → 清理回收站 → 胜利
  - 4 阶段：筛选 → 对比待定 → 分类到相册 → 清理回收站 → 胜利
- **分类到相册阶段**：逐张处理保留照片，点击相册按钮即可分类
- **清理回收站阶段**：批量选择回收站照片，支持恢复或永久删除
- **增强胜利页面**：展示更丰富的统计数据（分类到相册数、永久删除数等）
- **智能跳过**：无照片的阶段自动跳过，流程更顺畅

### UI 修复

- **滑块修复**：修复设置中相册标签大小滑块不能拖到头的问题
- **按钮对齐**：修复卡片滑动视图底部相册按钮垂直不对齐
- **标题优化**：快速整理页面删除 "Flow Sorter" 文字，放大进度显示
- **信息位置**：开启相册模式时，照片信息移到顶部显示，避免与底部相册标签重叠

---

## [1.5.0.007] - 2026-01-18

### 🔔 前台服务保活 - 彻底解决提醒问题

通过前台服务方案彻底解决每日提醒在 app 被杀死后无法触发的问题。

### 核心改进

- **前台服务保活**：通过常驻通知保持 app 存活，确保提醒准时送达
- **状态栏进度显示**：在状态栏实时显示每日整理进度（已整理/目标数量）
- **开机自启动**：手机重启后自动恢复服务，无需手动打开 app
- **可选开关**：设置页新增"状态栏进度通知"开关，可按需关闭

### 用户体验

- 点击状态栏通知可直接跳转进入 app
- 进度通知静默显示，不打扰日常使用
- 到点提醒会弹出独立高优先级通知
- 完成每日目标后通知显示庆祝标题

---

## [1.5.0.006] - 2026-01-18

### 🔔 每日提醒可靠性升级

本版本彻底修复每日任务提醒无法触发的问题，采用业界最佳实践确保通知可靠送达。

### 核心改进

- **采用 AlarmClock API**：使用 Android 最高优先级的闹钟调度方式，绕过 Doze 模式限制
- **静默通知**：提醒通知改为静默模式，不会发出声音或振动，只在通知栏显示
- **权限优化**：通知权限改为在用户开启每日提醒时才请求，不再在启动时打扰用户

### 修复

- **时间选择器**：修复设置提醒时间时，时间选择器默认滚动到 00:00 的问题
- **权限检查**：发送通知前检查权限，避免静默失败

---

## [1.5.0.005] - 2026-01-18

### 🔧 每日提醒修复

本版本修复每日任务提醒无法触发的问题。

### 修复

- **每日提醒初始化**：应用启动时自动检查并设置每日提醒闹钟
- **时间选择器默认值**：修复设置提醒时间时，时间选择器未显示当前已设置时间的问题

---

## [1.5.0.003] - 2026-01-18

### 📅 时间线功能

本版本新增时间线浏览功能，让照片整理更加直观高效。

### 新增功能

#### 📅 时间线浏览（核心功能）
- **按时间分组浏览**：照片自动按时间聚合成事件分组
- **多种分组模式**：支持智能分组、按天、按月、按年四种模式
- **智能分组算法**：基于时间间隔（4小时）和地点变化自动识别不同事件
- **整理进度显示**：每个分组显示"已整理/总数"的统计信息
- **快速整理入口**：点击分组右侧按钮可直接进入该时间段的整理流程
- **展开预览**：点击分组可展开查看缩略图预览
- **正序/倒序切换**：顶部导航栏一键切换时间排序方向
- **年月快速导航**：智能分组和按天模式下支持按年月快速跳转定位
- **查看更多优化**：点击"查看全部"直接跳转列表视图整理

#### 🎨 界面优化
- 时间线卡片简洁设计，突出整理进度和操作按钮
- 已全部整理的分组显示绿色标识
- 年月导航显示每月照片总数，布局更清晰

#### 🔧 体验改进
- 相册移动权限弹窗简化，移除"暂不授权"选项

---

## [1.4.1.001] - 2026-01-18

### 📁 相册分类模式 & 对比模式优化

本版本新增相册分类模式，让照片整理与相册管理无缝衔接，同时优化对比模式体验。

### 新增功能

#### 📁 相册分类模式（核心功能）
- **滑动整理支持相册分类**：筛选时可将照片直接加入相册，无需额外操作
- **智能路径识别**：正确识别系统相册路径（DCIM/Camera），不再创建重复相册
- **我的相册管理**：支持添加系统相册、自定义相册，气泡图与列表视图切换
- **列表拖拽排序**：相册列表支持拖动手柄调整顺序
- **照片信息展示优化**：相册模式下信息显示在照片本体，方便快速分类

#### 🔍 对比模式优化
- 浮动操作按钮优化，操作更便捷
- 同步缩放手势改进

#### 🎨 界面优化
- 首页返回时不再重复显示 Loading
- 成就系统分类与布局微调

### 修复

- 修复第一张照片滑动后计数器重置的问题
- 修复相册名称相同时路径混淆的问题
- 修复相册列表视图潜在的崩溃问题

---

## [1.3.1.046] - 2026-01-17

### 🎨 体验优化

本版本重点优化外观设置和滑动体验。

### 新增功能

#### 🎨 外观设置
- 新增主题模式切换（深色/浅色/跟随系统）
- 完善浅色主题配色方案

#### 👆 滑动体验优化
- 新增滑动灵敏度调节（设置页面可调）
- 不同方向应用不同阈值系数（下滑最易触发）
- 到达阈值时轻微震动反馈
- 阈值前后图标差异显示（空心→实心）

### 修复

- 修复滑动灵敏度修改后触发失效的问题
- 修复筛选状态下排序只在500张内生效的问题
- 修复上滑删除时偶发的加载错误提示

---

## [1.3.0.007] - 2026-01-17

### 🧪 体验优化与实验性功能

本版本修复关键问题并增加实验性功能入口。

### 新增功能

#### 🧪 实验性功能开关
- 设置中新增"实验性功能"开关，默认关闭
- 开启后首页显示智能画廊入口
- 描述："AI相关功能，施工中，不确定在您的手机上是什么样"

#### 📍 照片地点显示
- 照片信息现在显示拍摄地点（省 · 市）
- 纯离线逆地理编码，无需网络
- 内置中国约 340 个城市坐标数据

#### 📅 拍摄时间优化
- 照片信息显示完整日期时间（yyyy/MM/dd HH:mm）
- 更精确的时间记录

### 修复

#### 🔧 排序分页问题修复
- 修复切换排序方式时只在当前 500 张内排序的问题
- 现在切换排序会先对所有照片排序，再取前 500 张
- 支持"最新优先"和"最早优先"两种排序

---

## [1.3.0.007] - 2026-01-17

### 🧪 体验优化与实验性功能

本版本修复关键问题并增加实验性功能入口。

### 新增功能

#### 🧪 实验性功能开关
- 设置中新增"实验性功能"开关，默认关闭
- 开启后首页显示智能画廊入口
- 描述："AI相关功能，施工中，不确定在您的手机上是什么样"

#### 📍 照片地点显示
- 照片信息现在显示拍摄地点（省 · 市）
- 纯离线逆地理编码，无需网络
- 内置中国约 340 个城市坐标数据

#### 📅 拍摄时间优化
- 照片信息显示完整日期时间（yyyy/MM/dd HH:mm）
- 更精确的时间记录

### 修复

#### 🔧 排序分页问题修复
- 修复切换排序方式时只在当前 500 张内排序的问题
- 现在切换排序会先对所有照片排序，再取前 500 张
- 支持"最新优先"和"最早优先"两种排序

---

## [1.2.0.020] - 2026-01-17

### 🎛️ 自定义首页版本

本版本增加首页布局自定义功能，让整理体验更灵活。

### 新增功能

#### 🎛️ 一站式整理开关
- 设置中新增"一站式整理"开关，默认关闭
- 开启：首页显示一站式整理模块（完整卡片样式）
- 关闭：首页隐藏一站式整理模块，更简洁

#### 📊 顶部统计显示
- 关闭一站式整理后，首页顶部显示待整理/已整理数量
- 小巧的统计条，不占用太多空间
- 让用户随时了解整理进度

#### 🔄 任务模式改名
- "心流模式"更名为"一条龙整理"
- 更直观地表达功能含义

#### 💬 意见反馈入口
- 设置页面新增"意见反馈与功能许愿"链接
- 方便用户提交反馈和建议

### 修复
- 修复设置页面版本号未更新的问题

---

## [1.1.0.018] - 2026-01-17

### 🚀 体验优化版本

本版本针对用户反馈进行了全面的体验优化。

### 功能改进

#### 🎯 首页布局优化
- **每日任务**升级为首页核心入口，采用大卡片突出显示
- **一站式整理**调整为次要入口，简洁紧凑的卡片样式
- 更符合日常使用习惯的布局顺序

#### ⚡ 快速滑动优化
- 彻底解决快速滑动时的崩溃问题
- 优化数据库查询，使用 `LIMIT` 和单独的 `COUNT` 查询避免 `CursorWindow` 溢出
- 恢复丝滑的 Spring 动画效果，告别卡顿

#### 📊 进度显示修复
- 修复快速整理模式分母显示为500的问题
- 现在正确显示所有待整理照片的真实总数
- 分子分母稳定，不再闪烁

#### 📱 桌面小组件优化
- 每日任务进度实时更新
- 布局优化，2x2格子内完整显示
- 去除重复的进度数字显示

#### ⚙️ 默认设置优化
- 每日任务默认使用**快速整理模式**（更高效）
- 每日提醒**默认开启**
- 提醒时间默认设为**晚上10点**

---

## [1.0.0.001] - 2026-01-16

### 🎉 第一个正式版本！

PhotoZen 图禅 —— 让整理照片变成一种享受。

### 核心功能

#### 🎴 滑动整理 (Flow Sorter)
- Tinder 风格滑动：左右保留、上滑删除、下滑待定
- Spring 动画和触觉反馈
- 列表视图支持批量选择
- 支持 1/2/3 列切换

#### 🔍 照片对比 (Light Table)
- 同时对比 2-4 张照片
- 同步缩放功能
- 快速决策

#### 🏷️ 标签气泡
- 物理模拟的可拖拽气泡
- 弹性碰撞和惯性滑动
- 位置自动记忆
- 支持层级结构

#### ✂️ 无损编辑
- 非破坏性裁切
- 虚拟副本管理
- 图片导出

#### 🚀 心流模式
- 一站式整理流程
- 连击系统
- 胜利庆祝动画

#### 🏆 成就系统
- 50+ 成就徽章
- 5 个稀有度等级
- 进度追踪

#### 📁 照片管理
- 智能筛选（全部/相机/排除相机/自定义）
- 日期和相册范围选择
- 批量操作
- 回收站管理
- 外部删除同步

---

## 开发历程

以下为开发过程中的内部版本记录（v0.x.x）：

### [0.5.9] - 2026-01-16
- 修复 Workflow 模式筛选计数显示
- UI 文案优化

### [0.5.8] - 2026-01-16
- Flow 筛选条件改为响应式 StateFlow
- CUSTOM 模式正确导航

### [0.5.7] - 2026-01-16
- Flow 列表视图列数切换
- 回收站批量待定
- Flow 会话照片追踪

### [0.5.6] - 2026-01-16
- 批量管理扩展到待定和回收站
- 标签照片批量操作
- 列数切换功能

### [0.5.5] - 2026-01-16
- 批量管理模式
- 标签气泡拖动体验优化
- 品牌升级为 PhotoZen 图禅

### [0.5.4] - 2026-01-16
- 首页布局调整
- 移动模式优化

### [0.5.3] - 2026-01-15
- 标签气泡拖拽
- 气泡位置记忆
- 成就庆祝特效

### [0.5.2] - 2026-01-15
- 成就统计模块
- 快速分类数量修复

### [0.5.1] - 2026-01-15
- 快速分类横幅
- 排序图标区分
- 复制照片时间戳修复

### [0.5.0] - 2026-01-15
- 照片排序功能
- 照片复制功能
- EXIF 保留

### [0.4.0] - 2026-01-14
- 新应用图标
- 标签与系统相册关联
- 瀑布流布局
- 分享照片功能

### [0.3.0] - 2026-01-12
- Flow Sorter 滑动整理
- Light Table 照片对比
- 连击和成就系统
- 虚拟副本

### [0.2.0] - 2026-01-10
- 标签管理系统
- 快速标签功能
- 照片筛选

### [0.1.0] - 2026-01-08
- 基础照片整理功能
- MediaStore 同步
- 状态管理

### [0.0.1] - 2026-01-05
- 初始版本
- 基础框架搭建
